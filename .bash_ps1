#! /usr/bin/env bash
main () {
  local purple="\[\e[34m\]"
  local pink="\[\e[35m\]"
  local green="\[\e[32m\]"
  local yellow="\[\e[33m\]"
  local light_black="\[\e[90m\]"
  local black="\[\e[30m\]"

  local end="\[\e[0m\]"
  local underline="\[\e[4m\]"
  local bold="\[\e[1m\]"
  local decorations colorMain colorMeh colorText

  if [ "$(whoami)" != "root" ]; then
    case $(($RANDOM % 7)) in
      0)
      #The spaces avoids emoji collapsing on themselves. MacOS glitch.
      decorations="ğŸº ğŸŒ‹"'  '
      ;;
      1)
      decorations="ğŸŒ¸ ğŸŒ¿"'  '
      ;;
      2)
      decorations="ğŸš€ ğŸ’«"'  '
      ;;
      3)
      decorations="ğŸ ğŸ·"'  '
      ;;
      4)
      decorations="ğŸ”® ğŸ¦‹"'  '
      ;;
      5)
      decorations="ğŸŒ„ ğŸ†"'  '
      ;;
      6)
      decorations="ğŸ‡ ğŸ¥“"'  '
      ;;
    esac
    colorMain=$pink
    colorMeh=$light_black
  else
    colorMain=$purple
    colorMeh=$black
    colorText=$pink
    decorations="ğŸ’  ğŸ’ "'  '
  fi

  local horizontalSeparator="$colorMeh$underline$(printf %${COLUMNS}s)$end\n"
  local workdir="$colorMain\w $end"
  local histoty="$colorMeh!\! $end"
  local clock="$colorMeh\@ $end"
  local S="$colorMain\\$ $end$colorText"

  printf "${horizontalSeparator}${clock}${workdir}\n${decorations}"
  # printf "${horizontalSeparator}${histoty}${workdir}${clock}\n${decorations}"
}
export PS1=$(main)
